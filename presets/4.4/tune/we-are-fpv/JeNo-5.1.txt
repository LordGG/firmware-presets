#$ TITLE: JeNo 5.1 Inch
#$ FIRMWARE_VERSION: 4.4
#$ CATEGORY: TUNE
#$ STATUS: EXPERIMENTAL
#$ KEYWORDS: JeNo, 6S, Freestyle, 5 inch, 5", Cinematic
#$ AUTHOR: Jerome @jejefpv

#$ PARSER: MARKED
#$ INCLUDE_WARNING: misc/warnings/en/rpm_filters.txt

#$ DESCRIPTION: <a href="https://www.wearefpv.fr/"><img src="https://www.wearefpv.fr/wp-content/uploads/2023/02/WaF-Logo-Preset.png" width="327px" height="97" style="margin-left: auto; margin-right: auto; display: block;"/></a>
#$ DESCRIPTION:
#$ DESCRIPTION: ### JeNo 5.1 Inch Preset
#$ DESCRIPTION:
#$ DESCRIPTION: <br>The JeNo is a sturdy OpenSource frame, inspired from the Apex, natively O3 compatible and customizable with many options. Visit the
#$ DESCRIPTION: <a href="https://www.printables.com/fr/model/339099-jeno-51-drone-frame">JeNo official Printables Page</a> to learn more about it.
#$ DESCRIPTION: <br>
#$ DESCRIPTION:
#$ DESCRIPTION: Choose from the options from the drop-down:
#$ DESCRIPTION:
#$ DESCRIPTION: <br>
#$ DESCRIPTION:
#$ DESCRIPTION: * Pick PIDs option
#$ DESCRIPTION: * Pick Filtering option(s)
#$ DESCRIPTION: * Select ESCs protocol
#$ DESCRIPTION: * Pick your Radio Link or search in presets if not found
#$ DESCRIPTION: * Try some freestyle rates modeled on the 3 main styles...
#$ DESCRIPTION: 
#$ DESCRIPTION: <br>
#$ DESCRIPTION:
#$ DESCRIPTION: Enjoy!
#$ DESCRIPTION:
#$ DESCRIPTION: <br>
#$ DESCRIPTION:
#$ DESCRIPTION: Support, feedback and chat:
#$ DESCRIPTION:
#$ DESCRIPTION: <br>
#$ DESCRIPTION:
#$ DESCRIPTION:*[FORUM SUPPORT/FEEDBACK](https://forum.wearefpv.fr/topic/19574-jeno-51-un-ch%C3%A2ssis-custom-modulaire-avec-fov-d%C3%A9gag%C3%A9-o3)
#$ DESCRIPTION:
#$ DESCRIPTION: <br>
#$ DESCRIPTION: 

#$ INCLUDE: presets/4.3/tune/defaults.txt

# -- Antigravity --

set anti_gravity_gain = 5000

#$ OPTION_GROUP BEGIN:PIDs options :

    #$ OPTION BEGIN (UNCHECKED):High tune (clean build)

        set simplified_master_multiplier = 130
        set simplified_i_gain = 85
        set simplified_d_gain = 110
        set simplified_pi_gain = 110
        set simplified_dmax_gain = 0
        set simplified_feedforward_gain = 95
        set simplified_pitch_pi_gain = 115

    #$ OPTION END

    #$ OPTION BEGIN (CHECKED):I-term relax 17

        set simplified_master_multiplier = 130
        set simplified_i_gain = 85
        set simplified_d_gain = 110
        set simplified_pi_gain = 110
        set simplified_dmax_gain = 0
        set simplified_feedforward_gain = 95
        set simplified_pitch_pi_gain = 105

    #$ OPTION END

    #$ OPTION BEGIN (UNCHECKED):ESCs @48 Khz or more

        set simplified_master_multiplier = 115
        set simplified_i_gain = 85
        set simplified_d_gain = 110
        set simplified_pi_gain = 110
        set simplified_dmax_gain = 0
        set simplified_feedforward_gain = 95
        set simplified_pitch_pi_gain = 115

    #$ OPTION END

#$ OPTION_GROUP END

# ---- Filters Base Setup -------

#$ INCLUDE: presets/4.3/filters/defaults.txt

set dshot_bidir = OFF
set simplified_gyro_filter_multiplier = 120
set gyro_lpf1_static_hz = 0
set gyro_lpf1_dyn_min_hz = 0
set gyro_lpf1_dyn_max_hz = 0
set dyn_notch_count = 5
set dyn_notch_q = 400
set dyn_notch_min_hz = 90
set dyn_notch_max_hz = 800

set simplified_dterm_filter_multiplier = 140
set dterm_lpf1_dyn_min_hz = 0
set dterm_lpf1_dyn_max_hz = 0
set dterm_lpf1_dyn_expo = 0

#$ OPTION_GROUP BEGIN: Filtering options :

    #$ OPTION BEGIN (UNCHECKED): High performance (clean build)

        set dshot_bidir = ON
        set motor_pwm_protocol = DSHOT600
        set rpm_filter_harmonics = 3
        set rpm_filter_q = 1000
        set dyn_notch_count = 2
        set rpm_filter_fade_range_hz = 100

    #$ OPTION END 

    #$ OPTION BEGIN (CHECKED): Enable RPM filter (if supported)

        set gyro_hardware_lpf = OPTION_2
        set simplified_gyro_filter_multiplier = 120
        set gyro_lpf1_dyn_min_hz = 0

        set simplified_dterm_filter = OFF
        set dterm_lpf1_dyn_min_hz = 0
        set dterm_lpf1_dyn_max_hz = 0
        set dterm_lpf1_dyn_expo = 0
        set dterm_lpf1_static_hz = 0
        set dterm_lpf2_static_hz = 110
        set dterm_lpf2_type = BIQUAD

    #$ OPTION END 

#$ OPTION_GROUP END

#$ OPTION_GROUP BEGIN: ESCs' protocol :

    #$ OPTION BEGIN (UNCHECKED): DShot600 (F7 & up)
        #$ INCLUDE: presets/4.3/rates/defaults.txt

        set roll_rc_rate = 2
        set pitch_rc_rate = 2
        set yaw_rc_rate = 2
        set roll_expo = 40
        set pitch_expo = 40
        set yaw_expo = 40
        set roll_srate = 80
        set pitch_srate = 80
        set yaw_srate = 60
        
    #$ OPTION END

    #$ OPTION BEGIN (UNCHECKED): Dshot300 (F4 or BMI)
        #$ INCLUDE: presets/4.3/rates/defaults.txt

        set roll_rc_rate = 3
        set pitch_rc_rate = 3
        set yaw_rc_rate = 3
        set roll_expo = 35
        set pitch_expo = 35
        set yaw_expo = 35
        set roll_srate = 105
        set pitch_srate = 105
        set yaw_srate = 90

    #$ OPTION END

#$ OPTION_GROUP END

#$ OPTION_GROUP BEGIN: Choose RC Link

    #$ OPTION BEGIN (UNCHECKED): Crossfire Dynamic
        #$ INCLUDE: presets/4.3/rc_link/defaults.txt
        
        feature RX_SERIAL
        set serialrx_provider = CRSF

        set feedforward_averaging = OFF
        set feedforward_smooth_factor = 15
        set feedforward_jitter_factor = 10
        set feedforward_boost = 10

        set rc_smoothing_auto_factor = 45
        set rc_smoothing_auto_factor_throttle = 45

    #$ OPTION END

    #$ OPTION BEGIN (UNCHECKED): Crossfire 50Hz Locked
        #$ INCLUDE: presets/4.3/rc_link/defaults.txt

        feature RX_SERIAL
        set serialrx_provider = CRSF

        set feedforward_averaging = OFF
        set feedforward_smooth_factor = 0
        set feedforward_jitter_factor = 10
        set feedforward_boost = 5

        set rc_smoothing_auto_factor = 45
        set rc_smoothing_auto_factor_throttle = 45

    #$ OPTION END

    #$ OPTION BEGIN (UNCHECKED): Crossfire 150Hz Locked
        #$ INCLUDE: presets/4.3/rc_link/defaults.txt

        feature RX_SERIAL
        set serialrx_provider = CRSF

        set feedforward_averaging = OFF
        set feedforward_smooth_factor = 30
        set feedforward_jitter_factor = 7

        set rc_smoothing_auto_factor = 45
        set rc_smoothing_auto_factor_throttle = 45

    #$ OPTION END

    #$ OPTION BEGIN (UNCHECKED): Tracer/ELRS 250Hz
        #$ INCLUDE: presets/4.3/rc_link/defaults.txt

        feature RX_SERIAL
        set serialrx_provider = CRSF

        set feedforward_averaging = 2_POINT
        set feedforward_smooth_factor = 35
        set feedforward_jitter_factor = 4
        set feedforward_boost = 18

        set rc_smoothing_auto_factor = 45
        set rc_smoothing_auto_factor_throttle = 45

    #$ OPTION END

    #$ OPTION BEGIN (UNCHECKED): ELRS 500Hz
        #$ INCLUDE: presets/4.3/rc_link/defaults.txt

        feature RX_SERIAL
        set serialrx_provider = CRSF

        set feedforward_averaging = 2_POINT
        set feedforward_smooth_factor = 65
        set feedforward_jitter_factor = 3
        set feedforward_boost = 18

        set rc_smoothing_auto_factor = 45
        set rc_smoothing_auto_factor_throttle = 45

    #$ OPTION END

#$ OPTION_GROUP END

simplified_tuning apply